    related_note = models.ForeignKey('notes

**DÃ©pendances** : accounts, projects, notes, tasks, comments

#### âœ… Fichiers Ã  implÃ©menter
```
tags/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ apps.py
â”œâ”€â”€ admin.py                    # Admin Tag
â”œâ”€â”€ models.py                   # Tag
â”œâ”€â”€ serializers.py              # TagSerializer
â”œâ”€â”€ views.py                    # TagViewSet
â”œâ”€â”€ urls.py                     # Routes /api/tags/*
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_tag_model.py
â”‚   â””â”€â”€ test_tag_api.py
â””â”€â”€ migrations/
    â””â”€â”€ 0001_initial.py
```

#### ğŸ¯ Model Ã  crÃ©er
```python
# models.py
class Tag(models.Model):
    """Tag pour classification (partagÃ© entre notes et tÃ¢ches)"""
    name = models.CharField(max_length=50, unique=True)
    color = models.CharField(max_length=7, default='#6b7280')
    description = models.CharField(max_length=200, blank=True)
    usage_count = models.IntegerField(default=0)
    created_at = models.DateTimeField(auto_now_add=True)
    
    class Meta:
        ordering = ['-usage_count', 'name']
        indexes = [
            models.Index(fields=['usage_count']),
        ]
    
    def __str__(self):
        return self.name
```

#### ğŸ”Œ API Endpoints
- `GET /api/tags/` - Liste tags avec usage_count
- `POST /api/tags/` - CrÃ©er tag
- `GET /api/tags/{id}/` - DÃ©tail tag
- `PUT /api/tags/{id}/` - Modifier tag (Admin)
- `DELETE /api/tags/{id}/` - Supprimer tag (Admin)
- `GET /api/tags/{id}/notes/` - Notes utilisant ce tag
- `GET /api/tags/{id}/tasks/` - TÃ¢ches utilisant ce tag---

## ğŸ—„ï¸ Configuration Base de DonnÃ©es

### Script SQL de CrÃ©ation

Le fichier `sharetech_sql.sql` contient le script complet de crÃ©ation de la base de donnÃ©es avec :
- âœ… 11 tables principales
- âœ… Foreign keys avec ON DELETE CASCADE/SET NULL
- âœ… Index de performance sur colonnes frÃ©quemment requÃªtÃ©es
- âœ… Contraintes d'intÃ©gritÃ© (UNIQUE, CHECK)

### SchÃ©ma Relationnel Complet

```
USER (1,n) â”€â”€createsâ”€â”€> (1,1) PROJECT
USER (1,n) â”€â”€belongs_toâ”€â”€> (0,n) PROJECT [via PROJECT_MEMBER]
USER (1,n) â”€â”€authorsâ”€â”€> (1,1) NOTE
USER (1,n) â”€â”€assigned_toâ”€â”€> (0,1) TASK
USER (1,n) â”€â”€createsâ”€â”€> (1,1) TASK
USER (1,n) â”€â”€authorsâ”€â”€> (1,1) COMMENT
USER (1,n) â”€â”€uploadsâ”€â”€> (1,1) ATTACHMENT
USER (1,n) â”€â”€receivesâ”€â”€> (1,1) NOTIFICATION

PROJECT (1,n) â”€â”€containsâ”€â”€> (1,1) NOTE
PROJECT (1,n) â”€â”€containsâ”€â”€> (1,1) TASK

NOTE (1,n) â”€â”€hasâ”€â”€> (0,n) COMMENT
NOTE (1,n) â”€â”€hasâ”€â”€> (0,n) ATTACHMENT
NOTE (0,n) â”€â”€classified_byâ”€â”€> (0,n) TAG [via NOTE_TAG]

TASK (0,n) â”€â”€classified_byâ”€â”€> (0,n) TAG [via TASK_TAG]

COMMENT (0,1) â”€â”€replies_toâ”€â”€> (0,n) COMMENT (self-referencing)
COMMENT (1,n) â”€â”€hasâ”€â”€> (0,n) ATTACHMENT
```

### Index de Performance CrÃ©Ã©s

```sql
-- USER
idx_user_role, idx_user_active

-- PROJECT  
idx_project_status, idx_project_created_by, idx_project_name

-- PROJECT_MEMBER
idx_project_member_project, idx_project_member_user, idx_project_member_role

-- NOTE
idx_note_project, idx_note_author, idx_note_status, idx_note_priority, 
idx_note_title, idx_note_published, idx_note_created

-- TASK
idx_task_project, idx_task_assigned, idx_task_created_by, idx_task_status, 
idx_task_priority, idx_task_due_date

-- COMMENT
idx_comment_note, idx_comment_author, idx_comment_parent, idx_comment_created

-- ATTACHMENT
idx_attachment_note, idx_attachment_comment, idx_attachment_uploaded_by, idx_attachment_mime

-- NOTIFICATION
idx_notification_user, idx_notification_type, idx_notification_read, 
idx_notification_triggered, idx_notification_created

-- TAG
idx_tag_usage

-- Index composites pour requÃªtes complexes
idx_note_project_status (project_id, status)
idx_task_project_assigned (project_id, assigned_to)
idx_notification_user_unread (user_id, is_read)
idx_task_status_due (status, due_date)
```

---

## ğŸ³ Configuration Docker

### docker-compose.yml
```yaml
version: '3.8'

services:
  # Service MariaDB
  db:
    image: mariadb:10.6
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: sharetech_memory
      MYSQL_USER: sharetech
      MYSQL_PASSWORD: sharetech123
    volumes:
      - mariadb_data:/var/lib/mysql
      - ./sharetech_sql.sql:/docker-entrypoint-initdb.d/init_db.sql
    ports:
      - "3306:3306"
    networks:
      - sharetech_network
    healthcheck:
      test: ["CMD", "mysqladmin", "ping", "-h", "localhost"]
      interval: 10s
      timeout: 5s
      retries: 5

  # Service Backend Django
  backend:
    build: ./backend
    command: >
      sh -c "python manage.py migrate &&
             python manage.py collectstatic --noinput &&
             python manage.py runserver 0.0.0.0:8000"
    volumes:
      - ./backend:/app
      - static_volume:/app/staticfiles
      - media_volume:/app/media
    ports:
      - "8000:8000"
    depends_on:
      db:
        condition: service_healthy
    environment:
      - DEBUG=1
      - DATABASE_URL=mysql://sharetech:sharetech123@db:3306/sharetech_memory
      - SECRET_KEY=your-secret-key-here
      - ALLOWED_HOSTS=localhost,127.0.0.1
    networks:
      - sharetech_network

  # Service Frontend React
  frontend:
    build: ./frontend
    command: npm start
    volumes:
      - ./frontend:/app
      - /app/node_modules
    ports:
      - "3000:3000"
    depends_on:
      - backend
    environment:
      - REACT_APP_API_URL=http://localhost:8000
      - CHOKIDAR_USEPOLLING=true
    networks:
      - sharetech_network

volumes:
  mariadb_data:
  static_volume:
  media_volume:

networks:
  sharetech_network:
    driver: bridge
```

### backend/Dockerfile
```dockerfile
FROM python:3.12-slim

WORKDIR /app

# Installation dÃ©pendances systÃ¨me pour mysqlclient
RUN apt-get update && apt-get install -y \
    default-libmysqlclient-dev \
    build-essential \
    pkg-config \
    && rm -rf /var/lib/apt/lists/*

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 8000

CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]
```

### frontend/Dockerfile
```dockerfile
FROM node:22-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 3000

CMD ["npm", "start"]
```

### backend/requirements.txt
```
Django==5.0.1
djangorestframework==3.14.0
django-cors-headers==4.3.1
mysqlclient==2.2.1
python-decouple==3.8
Pillow==10.2.0
django-extensions==3.2.3
django-filter==23.5
```

---

## ğŸ“ Conventions de Nommage

### Base de DonnÃ©es
- **Tables** : UPPERCASE avec underscore (ex: `USER`, `PROJECT_MEMBER`)
- **Colonnes** : snake_case (ex: `created_at`, `password_hash`)
- **ClÃ©s Ã©trangÃ¨res** : `{table_singular}_id` (ex: `project_id`, `author_id`)
- **Index** : `idx_{table}_{column}` (ex: `idx_user_role`)
- **Contraintes** : `fk_{table}_{column}` pour foreign keys

### Django (Backend)
- **Models** : PascalCase, singular (ex: `User`, `Project`, `ProjectMember`)
- **Fields** : snake_case, correspond aux colonnes SQL (ex: `created_at`, `password_hash`)
- **Views** : PascalCase + ViewSet suffix (ex: `ProjectViewSet`, `NoteViewSet`)
- **Serializers** : PascalCase + Serializer suffix (ex: `UserSerializer`, `ProjectSerializer`)
- **URLs** : kebab-case, plural (ex: `/api/projects/`, `/api/user-profile/`)
- **Apps** : snake_case, plural (ex: `accounts`, `core`, `notifications`, `attachments`)
- **Methods** : snake_case (ex: `get_queryset`, `perform_create`)
- **Constants** : UPPER_SNAKE_CASE (ex: `MAX_FILE_SIZE`, `ALLOWED_MIME_TYPES`)

### React (Frontend)
- **Components** : PascalCase (ex: `LoginPage`, `ProjectCard`, `TaskBoard`)
- **Functions** : camelCase (ex: `handleSubmit`, `fetchProjects`, `updateTaskStatus`)
- **Contexts** : PascalCase + Context suffix (ex: `AuthContext`, `ProjectContext`)
- **Providers** : PascalCase + Provider suffix (ex: `AuthProvider`)
- **Services** : camelCase + Service suffix (ex: `authService`, `projectService`)
- **Constants** : UPPER_SNAKE_CASE (ex: `API_BASE_URL`, `USER_ROLES`, `TASK_STATUSES`)
- **CSS Classes** : kebab-case (ex: `.project-card`, `.btn-primary`, `.task-item`)
- **Props** : camelCase (ex: `onClick`, `isActive`, `projectId`)
- **State variables** : camelCase (ex: `user`, `projects`, `isLoading`)

### API REST
- **Endpoints** : kebab-case, plural pour collections (ex: `/api/projects/`, `/api/task-tags/`)
- **Methods HTTP** :
  - `GET /api/projects/` - Liste (collection)
  - `POST /api/projects/` - CrÃ©ation
  - `GET /api/projects/{id}/` - DÃ©tail (instance)
  - `PUT /api/projects/{id}/` - Modification complÃ¨te
  - `PATCH /api/projects/{id}/` - Modification partielle
  - `DELETE /api/projects/{id}/` - Suppression
- **Query params** : snake_case (ex: `?status=actif&created_by=5`)
- **Request/Response body** : snake_case JSON (ex: `{"project_id": 1, "user_id": 3}`)

### Git
- **Branches** : 
  - `main` - Production stable
  - `develop` - DÃ©veloppement en cours
  - `feature/{nom-feature}` - Nouvelle fonctionnalitÃ© (ex: `feature/note-versioning`)
  - `fix/{nom-bug}` - Correction de bug (ex: `fix/login-redirect`)
  - `refactor/{nom}` - Refactorisation (ex: `refactor/api-services`)
  - `docs/{nom}` - Documentation (ex: `docs/api-reference`)
- **Commits** : Conventional Commits
  - `feat: add user authentication with session cookies`
  - `fix: resolve task status update issue`
  - `docs: update API endpoint documentation`
  - `refactor: improve project service error handling`
  - `style: format code with prettier`
  - `test: add tests for note creation`
  - `chore: update dependencies`

### Fichiers et Dossiers
- **Python files** : snake_case (ex: `models.py`, `user_service.py`)
- **React files** : PascalCase pour composants (ex: `ProjectCard.jsx`), camelCase pour services (ex: `authService.js`)
- **CSS files** : kebab-case (ex: `project-card.css`, `global-styles.css`)
- **Config files** : kebab-case ou dot-prefixed (ex: `docker-compose.yml`, `.env`, `.gitignore`)

---

## ğŸ” SystÃ¨me de Permissions

### HiÃ©rarchie des RÃ´les

```
Admin (superuser)
  â””â”€> Lead Developer
       â””â”€> Senior Developer
            â””â”€> Junior Developer (base)
```

### Matrice des Permissions

| Action | Junior | Senior | Lead | Admin |
|--------|--------|--------|------|-------|
| **Projets** |
| Consulter projets accessibles | âœ… | âœ… | âœ… | âœ… |
| CrÃ©er projet | âŒ | âŒ | âœ… | âœ… |
| Modifier projet | âŒ | âŒ | âœ… (si membre) | âœ… |
| Supprimer projet | âŒ | âŒ | âŒ | âœ… |
| Ajouter membres | âŒ | âŒ | âœ… (si maintainer) | âœ… |
| Retirer membres | âŒ | âŒ | âœ… (si maintainer) | âœ… |
| **Notes** |
| Consulter notes projet | âœ… (si membre) | âœ… (si membre) | âœ… (si membre) | âœ… |
| CrÃ©er note | âœ… | âœ… | âœ… | âœ… |
| Modifier ses notes | âœ… | âœ… | âœ… | âœ… |
| Modifier notes autres | âŒ | âœ… | âœ… | âœ… |
| Supprimer ses notes | âœ… | âœ… | âœ… | âœ… |
| Supprimer notes autres | âŒ | âŒ | âœ… | âœ… |
| Publier note | âœ… (auteur) | âœ… | âœ… | âœ… |
| **TÃ¢ches** |
| Consulter tÃ¢ches | âœ… (si membre) | âœ… (si membre) | âœ… (si membre) | âœ… |
| CrÃ©er tÃ¢che | âŒ | âŒ | âœ… | âœ… |
| Modifier tÃ¢che | âŒ | âŒ | âœ… | âœ… |
| Supprimer tÃ¢che | âŒ | âŒ | âœ… | âœ… |
| Assigner tÃ¢che | âŒ | âŒ | âœ… | âœ… |
| Changer statut (si assignÃ©) | âœ… | âœ… | âœ… | âœ… |
| Changer prioritÃ© | âŒ | âŒ | âœ… | âœ… |
| **Commentaires** |
| Lire commentaires | âœ… (si accÃ¨s note) | âœ… | âœ… | âœ… |
| Ajouter commentaire | âœ… | âœ… | âœ… | âœ… |
| Modifier son commentaire (24h) | âœ… | âœ… | âœ… | âœ… |
| Supprimer son commentaire | âœ… | âœ… | âœ… | âœ… |
| Supprimer commentaire autre | âŒ | âŒ | âœ… | âœ… |
| **Fichiers** |
| TÃ©lÃ©charger fichier | âœ… (si accÃ¨s) | âœ… | âœ… | âœ… |
| Upload fichier | âœ… | âœ… | âœ… | âœ… |
| Supprimer ses fichiers | âœ… | âœ… | âœ… | âœ… |
| Supprimer fichiers autres | âŒ | âŒ | âœ… | âœ… |
| **Administration** |
| GÃ©rer utilisateurs | âŒ | âŒ | âŒ | âœ… |
| Changer rÃ´les | âŒ | âŒ | âŒ | âœ… |
| AccÃ©der---

## âš›ï¸ Architecture Frontend React (DÃ©taillÃ©e)

### ğŸ“‚ Structure ComplÃ¨te
```
frontend/src/
â”œâ”€â”€ components/                 # Composants rÃ©utilisables
â”‚   â”œâ”€â”€ common/                 # âš ï¸ Composants gÃ©nÃ©riques
â”‚   â”‚   â”œâ”€â”€ Button.js
â”‚   â”‚   â”œâ”€â”€ Input.js
â”‚   â”‚   â”œâ”€â”€ Modal.js
â”‚   â”‚   â”œâ”€â”€ Card.js
â”‚   â”‚   â”œâ”€â”€ Badge.js
â”‚   â”‚   â”œâ”€â”€ Spinner.js
â”‚   â”‚   â””â”€â”€ Toast.js
â”‚   â”‚
â”‚   â”œâ”€â”€ auth/                   # âš ï¸ Authentification
â”‚   â”‚   â”œâ”€â”€ LoginForm.js
â”‚   â”‚   â”œâ”€â”€ RegisterForm.js
â”‚   â”‚   â””â”€â”€ PrivateRoute.js
â”‚   â”‚
â”‚   â”œâ”€â”€ projects/               # âš ï¸ Gestion projets
â”‚   â”‚   â”œâ”€â”€ ProjectCard.js
â”‚   â”‚   â”œâ”€â”€ ProjectForm.js
â”‚   â”‚   â”œâ”€â”€ ProjectList.js
â”‚   â”‚   â”œâ”€â”€ ProjectMemberList.js
â”‚   â”‚   â””â”€â”€ AddMemberModal.js
â”‚   â”‚
â”‚   â”œâ”€â”€ notes/                  # âš ï¸ Gestion notes
â”‚   â”‚   â”œâ”€â”€ NoteCard.js
â”‚   â”‚   â”œâ”€â”€ NoteEditor.js       # Ã‰diteur Markdown
â”‚   â”‚   â”œâ”€â”€ NoteList.js
â”‚   â”‚   â”œâ”€â”€ NoteDetail.js
â”‚   â”‚   â””â”€â”€ NoteFilters.js
â”‚   â”‚
â”‚   â”œâ”€â”€ tasks/                  # âš ï¸ Gestion tÃ¢ches
â”‚   â”‚   â”œâ”€â”€ TaskCard.js
â”‚   â”‚   â”œâ”€â”€ TaskForm.js
â”‚   â”‚   â”œâ”€â”€ TaskBoard.js        # Vue Kanban
â”‚   â”‚   â”œâ”€â”€ TaskList.js
â”‚   â”‚   â””â”€â”€ TaskFilters.# ShareTech - Architecture de RÃ©fÃ©rence

> ğŸ“Œ **Document de rÃ©fÃ©rence** : Ce fichier dÃ©crit l'architecture complÃ¨te du projet ShareTech tel qu'il doit Ãªtre construit. Utilise-le comme guide pour vÃ©rifier que chaque composant est bien implÃ©mentÃ©.

## ğŸ“Š Vue d'Ensemble

### Concept
ShareTech est une plateforme collaborative qui centralise la documentation technique et la gestion de tÃ¢ches pour les Ã©quipes de dÃ©veloppement de l'entreprise Memory.

### Objectifs du Projet
- ğŸ¯ Centraliser les connaissances techniques dans un espace unique
- ğŸ¯ Faciliter le suivi des tÃ¢ches et leur assignation
- ğŸ¯ AmÃ©liorer la collaboration entre dÃ©veloppeurs
- ğŸ¯ Tracer l'historique des dÃ©cisions techniques

### FonctionnalitÃ©s Principales
1. **Partage de Connaissances**
   - âœ… CrÃ©ation et gestion de notes techniques avec contenu riche (Markdown)
   - âœ… SystÃ¨me de commentaires hiÃ©rarchiques (max 5 niveaux)
   - âœ… Classification par tags (max 10 par note)
   - âœ… Versioning automatique avec historique
   - âœ… Recherche full-text dans titres et contenus
   - âœ… Gestion de fichiers joints (max 100MB)

2. **Gestion de TÃ¢ches**
   - âœ… CrÃ©ation et assignation de tÃ¢ches aux membres
   - âœ… Suivi d'avancement avec statuts (Ã  faire â†’ en cours â†’ en test â†’ terminÃ©e)
   - âœ… Gestion des prioritÃ©s (basse, normale, haute, urgente) et Ã©chÃ©ances
   - âœ… Tableau de bord Kanban avec mÃ©triques
   - âœ… Notifications automatiques sur changements

3. **SystÃ¨me Collaboratif**
   - âœ… Gestion de projets multi-membres avec rÃ´les
   - âœ… SystÃ¨me de permissions hiÃ©rarchique (Junior â†’ Senior â†’ Lead â†’ Admin)
   - âœ… Notifications in-app avec prÃ©fÃ©rences
   - âœ… Historique complet des actions avec audit trail

---

## ğŸ—ï¸ Architecture Backend Django (DÃ©taillÃ©e)

### ğŸ“‚ Feature : accounts/ (Gestion Utilisateurs & Authentification)

**ResponsabilitÃ©** : Authentification et gestion des profils utilisateurs

**PrioritÃ© de dÃ©veloppement** : ğŸ¥‡ **#1 - ESSENTIEL** (PrÃ©requis pour tout le reste)

#### âœ… Fichiers Ã  implÃ©menter
```
accounts/
â”œâ”€â”€ __init__.py                 # Package marker
â”œâ”€â”€ apps.py                     # Configuration app
â”œâ”€â”€ admin.py                    # Interface admin Django
â”œâ”€â”€ models.py                   # Model User Ã©tendu
â”œâ”€â”€ serializers.py              # UserSerializer, LoginSerializer
â”œâ”€â”€ views.py                    # LoginView, LogoutView, ProfileView
â”œâ”€â”€ urls.py                     # Routes /api/auth/*
â”œâ”€â”€ tests.py                    # Tests unitaires
â”œâ”€â”€ permissions.py              # Permissions personnalisÃ©es
â””â”€â”€ migrations/                 # Migrations base de donnÃ©es
    â””â”€â”€ 0001_initial.py
```

#### ğŸ¯ Models Ã  crÃ©er
```python
# models.py
class User(AbstractUser):
    """Utilisateur Ã©tendu avec rÃ´les hiÃ©rarchiques"""
    ROLE_CHOICES = [
        ('junior', 'Junior Developer'),
        ('senior', 'Senior Developer'),
        ('lead', 'Lead Developer'),
        ('admin', 'Administrator'),
    ]
    role = models.CharField(max_choices=ROLE_CHOICES, default='junior')
    avatar_url = models.URLField(blank=True)
    is_active = models.BooleanField(default=True)
    date_joined = models.DateTimeField(auto_now_add=True)
    last_login = models.DateTimeField(null=True, blank=True)
```

#### ğŸ”Œ API Endpoints
- `POST /api/auth/login/` - Connexion (SessionAuthentication)
- `POST /api/auth/logout/` - DÃ©connexion
- `GET /api/auth/user/` - Profil utilisateur connectÃ©
- `PUT /api/auth/user/` - Mise Ã  jour profil
- `PATCH /api/auth/user/avatar/` - Upload avatar

#### ğŸ” Permissions
```python
# permissions.py
class IsOwnerOrReadOnly(BasePermission):
    """Seul le propriÃ©taire peut modifier"""
    
class IsSeniorOrAbove(BasePermission):
    """NÃ©cessite rÃ´le Senior minimum"""
    
class IsLeadOrAbove(BasePermission):
    """NÃ©cessite rÃ´le Lead minimum"""
```

---

### ğŸ“‚ Feature : projects/ (Gestion Projets)

**ResponsabilitÃ©** : Projets collaboratifs et gestion des membres

**PrioritÃ© de dÃ©veloppement** : ğŸ¥ˆ **#2 - ESSENTIEL** (Contexte pour notes et tÃ¢ches)

**DÃ©pendances** : accounts

#### âœ… Fichiers Ã  implÃ©menter
```
projects/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ apps.py
â”œâ”€â”€ admin.py                    # Admin Project, ProjectMember
â”œâ”€â”€ models.py                   # Project, ProjectMember
â”œâ”€â”€ serializers.py              # ProjectSerializer, ProjectMemberSerializer
â”œâ”€â”€ views.py                    # ProjectViewSet, MemberViewSet
â”œâ”€â”€ urls.py                     # Routes /api/projects/*
â”œâ”€â”€ filters.py                  # Filtres recherche projets
â”œâ”€â”€ permissions.py              # Permissions projet
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_project_model.py
â”‚   â”œâ”€â”€ test_project_api.py
â”‚   â””â”€â”€ test_permissions.py
â””â”€â”€ migrations/
    â””â”€â”€ 0001_initial.py
```

#### ğŸ¯ Models Ã  crÃ©er
```python
# models.py
class Project(models.Model):
    """Projet collaboratif"""
    STATUS_CHOICES = [
        ('actif', 'Actif'),
        ('archive', 'ArchivÃ©'),
        ('suspendu', 'Suspendu'),
    ]
    name = models.CharField(max_length=100)
    description = models.TextField(blank=True)
    status = models.CharField(choices=STATUS_CHOICES, default='actif')
    created_by = models.ForeignKey('accounts.User', on_delete=models.CASCADE)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        ordering = ['-created_at']
        indexes = [
            models.Index(fields=['status']),
            models.Index(fields=['created_by']),
        ]

class ProjectMember(models.Model):
    """Table de liaison User-Project avec rÃ´les"""
    ROLE_CHOICES = [
        ('member', 'Member'),
        ('contributor', 'Contributor'),
        ('maintainer', 'Maintainer'),
    ]
    project = models.ForeignKey(Project, on_delete=models.CASCADE, related_name='members')
    user = models.ForeignKey('accounts.User', on_delete=models.CASCADE)
    role_project = models.CharField(choices=ROLE_CHOICES, default='member')
    joined_at = models.DateTimeField(auto_now_add=True)
    
    class Meta:
        unique_together = ['project', 'user']
        indexes = [
            models.Index(fields=['project']),
            models.Index(fields=['user']),
        ]
```

#### ğŸ”Œ API Endpoints
- `GET /api/projects/` - Liste projets (filtrÃ©s selon accÃ¨s)
- `POST /api/projects/` - CrÃ©er projet (Lead+)
- `GET /api/projects/{id}/` - DÃ©tail projet
- `PUT /api/projects/{id}/` - Modifier projet (Lead+)
- `DELETE /api/projects/{id}/` - Supprimer projet (Admin)
- `GET /api/projects/{id}/members/` - Liste membres
- `POST /api/projects/{id}/members/` - Ajouter membre (Lead+)
- `DELETE /api/projects/{id}/members/{user_id}/` - Retirer membre (Lead+)

---

### ğŸ“‚ Feature : notes/ (Notes Techniques)

**ResponsabilitÃ©** : CrÃ©ation et gestion de notes techniques avec versioning

**PrioritÃ© de dÃ©veloppement** : ğŸ¥‰ **#3 - CORE FEATURE** (FonctionnalitÃ© principale)

**DÃ©pendances** : accounts, projects, tags

#### âœ… Fichiers Ã  implÃ©menter
```
notes/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ apps.py
â”œâ”€â”€ admin.py                    # Admin Note
â”œâ”€â”€ models.py                   # Note, NoteTag (liaison)
â”œâ”€â”€ serializers.py              # NoteSerializer, NoteDetailSerializer
â”œâ”€â”€ views.py                    # NoteViewSet
â”œâ”€â”€ urls.py                     # Routes /api/notes/*
â”œâ”€â”€ filters.py                  # Filtres recherche notes
â”œâ”€â”€ permissions.py              # Permissions notes
â”œâ”€â”€ services.py                 # Versioning, search
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_note_model.py
â”‚   â”œâ”€â”€ test_note_api.py
â”‚   â”œâ”€â”€ test_versioning.py
â”‚   â””â”€â”€ test_permissions.py
â””â”€â”€ migrations/
    â””â”€â”€ 0001_initial.py
```

#### ğŸ¯ Models Ã  crÃ©er
```python
# models.py
class Note(models.Model):
    """Note technique avec versioning"""
    STATUS_CHOICES = [
        ('brouillon', 'Brouillon'),
        ('publie', 'PubliÃ©'),
        ('archive', 'ArchivÃ©'),
    ]
    PRIORITY_CHOICES = [
        ('basse', 'Basse'),
        ('normale', 'Normale'),
        ('haute', 'Haute'),
    ]
    title = models.CharField(max_length=200)
    content = models.TextField()
    excerpt = models.CharField(max_length=500, blank=True)
    status = models.CharField(choices=STATUS_CHOICES, default='brouillon')
    priority = models.CharField(choices=PRIORITY_CHOICES, default='normale')
    project = models.ForeignKey('projects.Project', on_delete=models.CASCADE, related_name='notes')
    author = models.ForeignKey('accounts.User', on_delete=models.CASCADE, related_name='authored_notes')
    tags = models.ManyToManyField('tags.Tag', through='NoteTag', related_name='notes')
    view_count = models.IntegerField(default=0)
    like_count = models.IntegerField(default=0)
    published_at = models.DateTimeField(null=True, blank=True)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        ordering = ['-created_at']
        indexes = [
            models.Index(fields=['project', 'status']),
            models.Index(fields=['author']),
            models.Index(fields=['status']),
            models.Index(fields=['priority']),
        ]

class NoteTag(models.Model):
    """Table de liaison Note-Tag"""
    note = models.ForeignKey(Note, on_delete=models.CASCADE)
    tag = models.ForeignKey('tags.Tag', on_delete=models.CASCADE)
    assigned_at = models.DateTimeField(auto_now_add=True)
    
    class Meta:
        unique_together = ['note', 'tag']
```

#### ğŸ”Œ API Endpoints
- `GET /api/projects/{id}/notes/` - Notes d'un projet
- `POST /api/projects/{id}/notes/` - CrÃ©er note
- `GET /api/notes/{id}/` - DÃ©tail note
- `PUT /api/notes/{id}/` - Modifier note (auteur ou Senior+)
- `DELETE /api/notes/{id}/` - Supprimer note (auteur ou Lead+)
- `PATCH /api/notes/{id}/status/` - Changer statut
- `GET /api/notes/{id}/history/` - Historique versions
- `POST /api/notes/{id}/tags/` - Ajouter tags
- `DELETE /api/notes/{id}/tags/{tag_id}/` - Retirer tag

---

### ğŸ“‚ Feature : tasks/ (Gestion TÃ¢ches)

**ResponsabilitÃ©** : TÃ¢ches de projet avec assignation et suivi

**PrioritÃ© de dÃ©veloppement** : ğŸ… **#4 - CORE FEATURE** (FonctionnalitÃ© principale)

**DÃ©pendances** : accounts, projects, tags

#### âœ… Fichiers Ã  implÃ©menter
```
tasks/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ apps.py
â”œâ”€â”€ admin.py                    # Admin Task
â”œâ”€â”€ models.py                   # Task, TaskTag (liaison)
â”œâ”€â”€ serializers.py              # TaskSerializer, TaskDetailSerializer
â”œâ”€â”€ views.py                    # TaskViewSet
â”œâ”€â”€ urls.py                     # Routes /api/tasks/*
â”œâ”€â”€ filters.py                  # Filtres recherche tÃ¢ches
â”œâ”€â”€ permissions.py              # Permissions tÃ¢ches
â”œâ”€â”€ services.py                 # Assignation, notifications
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_task_model.py
â”‚   â”œâ”€â”€ test_task_api.py
â”‚   â”œâ”€â”€ test_assignment.py
â”‚   â””â”€â”€ test_permissions.py
â””â”€â”€ migrations/
    â””â”€â”€ 0001_initial.py
```

#### ğŸ¯ Models Ã  crÃ©er
```python
# models.py
class Task(models.Model):
    """TÃ¢che de projet avec assignation"""
    STATUS_CHOICES = [
        ('a_faire', 'Ã€ faire'),
        ('en_cours', 'En cours'),
        ('en_test', 'En test'),
        ('terminee', 'TerminÃ©e'),
        ('annulee', 'AnnulÃ©e'),
    ]
    PRIORITY_CHOICES = [
        ('basse', 'Basse'),
        ('normale', 'Normale'),
        ('haute', 'Haute'),
        ('urgente', 'Urgente'),
    ]
    title = models.CharField(max_length=200)
    description = models.TextField(blank=True)
    status = models.CharField(choices=STATUS_CHOICES, default='a_faire')
    priority = models.CharField(choices=PRIORITY_CHOICES, default='normale')
    estimated_hours = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)
    actual_hours = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)
    due_date = models.DateField(null=True, blank=True)
    completed_date = models.DateField(null=True, blank=True)
    project = models.ForeignKey('projects.Project', on_delete=models.CASCADE, related_name='tasks')
    assigned_to = models.ForeignKey('accounts.User', null=True, blank=True, on_delete=models.SET_NULL, related_name='assigned_tasks')
    created_by = models.ForeignKey('accounts.User', on_delete=models.CASCADE, related_name='created_tasks')
    tags = models.ManyToManyField('tags.Tag', through='TaskTag', related_name='tasks')
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        ordering = ['-created_at']
        indexes = [
            models.Index(fields=['project', 'assigned_to']),
            models.Index(fields=['status']),
            models.Index(fields=['priority']),
            models.Index(fields=['due_date']),
            models.Index(fields=['status', 'due_date']),
        ]

class TaskTag(models.Model):
    """Table de liaison Task-Tag"""
    task = models.ForeignKey(Task, on_delete=models.CASCADE)
    tag = models.ForeignKey('tags.Tag', on_delete=models.CASCADE)
    assigned_at = models.DateTimeField(auto_now_add=True)
    
    class Meta:
        unique_together = ['task', 'tag']
```

#### ğŸ”Œ API Endpoints
- `GET /api/projects/{id}/tasks/` - TÃ¢ches d'un projet
- `POST /api/projects/{id}/tasks/` - CrÃ©er tÃ¢che (Lead+)
- `GET /api/tasks/{id}/` - DÃ©tail tÃ¢che
- `PUT /api/tasks/{id}/` - Modifier tÃ¢che (Lead+)
- `DELETE /api/tasks/{id}/` - Supprimer tÃ¢che (Lead+)
- `PATCH /api/tasks/{id}/status/` - Changer statut (assignÃ©)
- `PATCH /api/tasks/{id}/assign/` - Assigner tÃ¢che (Lead+)
- `POST /api/tasks/{id}/tags/` - Ajouter tags
- `DELETE /api/tasks/{id}/tags/{tag_id}/` - Retirer tag

---

### ğŸ“‚ Feature : comments/ (SystÃ¨me Commentaires)

**ResponsabilitÃ©** : Commentaires hiÃ©rarchiques sur notes

**PrioritÃ© de dÃ©veloppement** : ğŸ–ï¸ **#5 - ENHANCEMENT** (AmÃ©liore notes)

**DÃ©pendances** : accounts, notes

#### âœ… Fichiers Ã  implÃ©menter
```
comments/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ apps.py
â”œâ”€â”€ admin.py                    # Admin Comment
â”œâ”€â”€ models.py                   # Comment
â”œâ”€â”€ serializers.py              # CommentSerializer, CommentTreeSerializer
â”œâ”€â”€ views.py                    # CommentViewSet
â”œâ”€â”€ urls.py                     # Routes /api/comments/*
â”œâ”€â”€ permissions.py              # Permissions commentaires
â”œâ”€â”€ services.py                 # Gestion hiÃ©rarchie, mentions
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_comment_model.py
â”‚   â”œâ”€â”€ test_comment_api.py
â”‚   â””â”€â”€ test_hierarchy.py
â””â”€â”€ migrations/
    â””â”€â”€ 0001_initial.py
```

#### ğŸ¯ Model Ã  crÃ©er
```python
# models.py
class Comment(models.Model):
    """Commentaire hiÃ©rarchique sur note"""
    content = models.TextField()
    note = models.ForeignKey('notes.Note', on_delete=models.CASCADE, related_name='comments')
    author = models.ForeignKey('accounts.User', on_delete=models.CASCADE, related_name='comments')
    parent_comment = models.ForeignKey('self', null=True, blank=True, on_delete=models.CASCADE, related_name='replies')
    is_edited = models.BooleanField(default=False)
    like_count = models.IntegerField(default=0)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        ordering = ['created_at']
        indexes = [
            models.Index(fields=['note']),
            models.Index(fields=['author']),
            models.Index(fields=['parent_comment']),
        ]
```

#### ğŸ”Œ API Endpoints
- `GET /api/notes/{id}/comments/` - Commentaires d'une note
- `POST /api/notes/{id}/comments/` - Ajouter commentaire
- `GET /api/comments/{id}/` - DÃ©tail commentaire
- `PUT /api/comments/{id}/` - Modifier commentaire (auteur, 24h max)
- `DELETE /api/comments/{id}/` - Supprimer commentaire (auteur ou Lead+)
- `POST /api/comments/{id}/replies/` - RÃ©pondre Ã  un commentaire

---

### ğŸ“‚ Feature : tags/ (SystÃ¨me Tags)

**ResponsabilitÃ©** : Tags partagÃ©s pour classification notes et tÃ¢ches

**PrioritÃ© de dÃ©veloppement** : ğŸ¯ **#6 - TRANSVERSAL** (UtilisÃ© par notes et tasks)

**DÃ©pendances** : Aucune (feature indÃ©pendante)

---

### ğŸ“‚ Feature : notifications/ (SystÃ¨me Notifications)

**ResponsabilitÃ©** : Gestion et envoi des notifications in-app

**PrioritÃ© de dÃ©veloppement** : ğŸ–ï¸ **#7 - ENHANCEMENT** (AmÃ©liore UX)

#### âœ… Fichiers Ã  implÃ©menter
```
notifications/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ apps.py
â”œâ”€â”€ admin.py
â”œâ”€â”€ models.py                   # Model Notification
â”œâ”€â”€ serializers.py              # NotificationSerializer
â”œâ”€â”€ views.py                    # NotificationViewSet
â”œâ”€â”€ urls.py                     # Routes /api/notifications/*
â”œâ”€â”€ services.py                 # Logique crÃ©ation notifications
â”œâ”€â”€ signals.py                  # Django signals pour auto-crÃ©ation
â”œâ”€â”€ tests.py
â””â”€â”€ migrations/
    â””â”€â”€ 0001_initial.py
```

#### ğŸ¯ Model Ã  crÃ©er
```python
# models.py
class Notification(models.Model):
    """Notification in-app pour utilisateur"""
    TYPE_CHOICES = [
        ('note_created', 'Note crÃ©Ã©e'),
        ('note_updated', 'Note mise Ã  jour'),
        ('task_assigned', 'TÃ¢che assignÃ©e'),
        ('task_completed', 'TÃ¢che terminÃ©e'),
        ('comment_added', 'Commentaire ajoutÃ©'),
        ('mention', 'Mention'),
        ('project_invitation', 'Invitation projet'),
    ]
    type = models.CharField(choices=TYPE_CHOICES)
    title = models.CharField(max_length=200)
    message = models.TextField()
    user = models.ForeignKey(User, on_delete=models.CASCADE)
.Note', null=True, on_delete=models.SET_NULL)
    related_task = models.ForeignKey('tasks.Task', null=True, on_delete=models.SET_NULL)
    related_comment = models.ForeignKey('comments.Comment', null=True, on_delete=models.SET_NULL)
    related_project = models.ForeignKey('projects.Project', null=True, on_delete=models.SET_NULL)
    triggered_by = models.ForeignKey('accounts.User', null=True, on_delete=models.SET_NULL, related_name='triggered_notifications')
    is_read = models.BooleanField(default=False)
    read_at = models.DateTimeField(null=True, blank=True)
    created_at = models.DateTimeField(auto_now_add=True)
    expires_at = models.DateTimeField(null=True, blank=True)
```

#### ğŸ¯ Services Ã  crÃ©er
```python
# services.py
class NotificationService:
    """Service pour crÃ©ation automatique de notifications"""
    
    @staticmethod
    def notify_task_assigned(task, assigned_user, assigned_by):
        """Notifie l'utilisateur qu'une tÃ¢che lui a Ã©tÃ© assignÃ©e"""
        
    @staticmethod
    def notify_comment_added(comment, note_author):
        """Notifie l'auteur de la note d'un nouveau commentaire"""
        
    @staticmethod
    def notify_mention(mentioned_user, content, triggered_by):
        """Notifie l'utilisateur qu'il a Ã©tÃ© mentionnÃ©"""
```

#### ğŸ”” Signals Ã  configurer
```python
# signals.py
from django.db.models.signals import post_save
from django.dispatch import receiver

@receiver(post_save, sender=Task)
def task_assigned_notification(sender, instance, created, **kwargs):
    """CrÃ©e notification automatique lors assignation tÃ¢che"""
    
@receiver(post_save, sender=Comment)
def comment_added_notification(sender, instance, created, **kwargs):
    """CrÃ©e notification pour nouveau commentaire"""
```

#### ğŸ”Œ API Endpoints
- `GET /api/notifications/` - Liste notifications utilisateur
- `GET /api/notifications/unread/` - Notifications non lues
- `PATCH /api/notifications/{id}/read/` - Marquer comme lu
- `PATCH /api/notifications/mark-all-read/` - Tout marquer comme lu
- `DELETE /api/notifications/{id}/` - Supprimer notification

---

### ğŸ“‚ Feature : attachments/ (Gestion Fichiers)

**ResponsabilitÃ©** : Upload, stockage et tÃ©lÃ©chargement de fichiers joints

**PrioritÃ© de dÃ©veloppement** : ğŸ–ï¸ **#8 - ENHANCEMENT** (Enrichit notes et commentaires)

**DÃ©pendances** : accounts, notes, comments

#### âœ… Fichiers Ã  implÃ©menter
```
attachments/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ apps.py
â”œâ”€â”€ admin.py
â”œâ”€â”€ models.py                   # Model Attachment
â”œâ”€â”€ serializers.py              # AttachmentSerializer
â”œâ”€â”€ views.py                    # AttachmentViewSet
â”œâ”€â”€ urls.py                     # Routes /api/attachments/*
â”œâ”€â”€ storage.py                  # Configuration stockage fichiers
â”œâ”€â”€ validators.py               # Validation fichiers (taille, type)
â”œâ”€â”€ services.py                 # Logique upload/hash
â”œâ”€â”€ tests.py
â””â”€â”€ migrations/
    â””â”€â”€ 0001_initial.py
```

#### ğŸ¯ Model Ã  crÃ©er
```python
# models.py
class Attachment(models.Model):
    """Fichier joint Ã  une note ou commentaire"""
    original_name = models.CharField(max_length=255)
    stored_name = models.CharField(max_length=255)  # UUID + extension
    file_path = models.CharField(max_length=500)
    file_size = models.IntegerField()  # en octets
    mime_type = models.CharField(max_length=100)
    file_hash = models.CharField(max_length=64, blank=True)  # MD5
    note = models.ForeignKey('notes.Note', null=True, on_delete=models.CASCADE)
    comment = models.ForeignKey('comments.Comment', null=True, on_delete=models.CASCADE)
    uploaded_by = models.ForeignKey('accounts.User', on_delete=models.CASCADE)
    upload_date = models.DateTimeField(auto_now_add=True)
    
    class Meta:
        constraints = [
            models.CheckConstraint(
                check=models.Q(note__isnull=False) | models.Q(comment__isnull=False),
                name='attachment_must_have_note_or_comment'
            )
        ]
```

#### ğŸ¯ Services Ã  crÃ©er
```python
# services.py
class AttachmentService:
    """Service pour gestion sÃ©curisÃ©e des fichiers"""
    
    ALLOWED_MIME_TYPES = [
        'image/jpeg', 'image/png', 'image/gif',
        'application/pdf',
        'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
        'text/plain', 'application/json', 'text/xml'
    ]
    MAX_FILE_SIZE = 104857600  # 100MB
    
    @staticmethod
    def validate_file(file):
        """Valide type et taille du fichier"""
        
    @staticmethod
    def generate_unique_filename(original_name):
        """GÃ©nÃ¨re nom unique avec UUID"""
        
    @staticmethod
    def calculate_hash(file):
        """Calcule hash MD5 du fichier"""
        
    @staticmethod
    def scan_virus(file):
        """Scan antivirus (Ã  implÃ©menter avec ClamAV)"""
```

#### ğŸ”Œ API Endpoints
- `POST /api/attachments/` - Upload fichier
- `GET /api/attachments/{id}/` - TÃ©lÃ©charger fichier
- `DELETE /api/attachments/{id}/` - Supprimer fichier (auteur ou Lead+)
- `GET /api/notes/{id}/attachments/` - Fichiers d'une note
- `GET /api/comments/{id}/attachments/` - Fichiers d'un commentaire

### Backend
- **Framework** : Django 5.0.1
- **API REST** : Django REST Framework 3.14.0
- **Langage** : Python 3.12
- **DÃ©pendances clÃ©s** :
  - `django-cors-headers==4.3.1` - Support CORS
  - `mysqlclient==2.2.1` - Connecteur MariaDB
  - `python-decouple==3.8` - Gestion configuration
  - `Pillow==10.2.0` - Traitement d'images
  - `django-extensions==3.2.3` - Utilitaires Django

### Frontend
- **Framework** : React 18.x
- **Langage** : JavaScript ES6+
- **BibliothÃ¨ques** :
  - `react-router-dom` - Routage client
  - `axios` - Client HTTP
  - Context API - Gestion d'Ã©tat global

### Base de DonnÃ©es
- **SGBD** : MariaDB 10.6
- **Moteur** : InnoDB
- **Collation** : utf8mb4_unicode_ci

### Infrastructure
- **Conteneurisation** : Docker + Docker Compose
- **Services** :
  - `db` : MariaDB (port 3306)
  - `backend` : Django (port 8000)
  - `frontend` : React (port 3000)

---

## ğŸ—‚ï¸ Structure du Projet (Ã‰tat Actuel vs Cible)

### ğŸ“ Structure Racine
```
ShareTech2/
â”œâ”€â”€ backend/                    # âœ… Application Django
â”‚   â”œâ”€â”€ sharetech/              # âœ… Configuration principale
â”‚   â”œâ”€â”€ accounts/               # âš ï¸ Feature #1 - ESSENTIEL
â”‚   â”œâ”€â”€ projects/               # âš ï¸ Feature #2 - ESSENTIEL
â”‚   â”œâ”€â”€ notes/                  # âš ï¸ Feature #3 - CORE
â”‚   â”œâ”€â”€ tasks/                  # âš ï¸ Feature #4 - CORE
â”‚   â”œâ”€â”€ comments/               # âš ï¸ Feature #5 - ENHANCEMENT
â”‚   â”œâ”€â”€ tags/                   # âš ï¸ Feature #6 - TRANSVERSAL
â”‚   â”œâ”€â”€ notifications/          # âš ï¸ Feature #7 - ENHANCEMENT
â”‚   â”œâ”€â”€ attachments/            # âš ï¸ Feature #8 - ENHANCEMENT
â”‚   â”œâ”€â”€ requirements.txt        # âœ… Fichier de dÃ©pendances
â”‚   â”œâ”€â”€ Dockerfile              # âœ… Configuration Docker
â”‚   â””â”€â”€ manage.py               # âœ… CLI Django
â”‚
â”œâ”€â”€ frontend/                   # âœ… Application React
â”‚   â”œâ”€â”€ public/                 # âœ… Assets publics
â”‚   â”œâ”€â”€ src/                    # âš ï¸ Ã€ structurer
â”‚   â”‚   â”œâ”€â”€ components/         # âš ï¸ Ã€ crÃ©er
â”‚   â”‚   â”œâ”€â”€ contexts/           # âš ï¸ Ã€ crÃ©er
â”‚   â”‚   â”œâ”€â”€ services/           # âš ï¸ Ã€ crÃ©er
â”‚   â”‚   â”œâ”€â”€ pages/              # âš ï¸ Ã€ crÃ©er
â”‚   â”‚   â”œâ”€â”€ utils/              # âš ï¸ Ã€ crÃ©er
â”‚   â”‚   â”œâ”€â”€ App.js              # âœ… Composant racine
â”‚   â”‚   â””â”€â”€ index.js            # âœ… Point d'entrÃ©e
â”‚   â”œâ”€â”€ package.json            # âœ… DÃ©pendances npm
â”‚   â””â”€â”€ Dockerfile              # âœ… Configuration Docker
â”‚
â”œâ”€â”€ docker-compose.yml          # âœ… Orchestration services
â”œâ”€â”€ sharetech_sql.sql           # âœ… Script SQL base de donnÃ©es
â”œâ”€â”€ .env                        # âœ… Variables d'environnement
â”œâ”€â”€ .gitignore                  # âœ… Fichiers Ã  ignorer
â”œâ”€â”€ README.md                   # âš ï¸ Ã€ complÃ©ter
â””â”€â”€ architecture.md             # âœ… Ce fichier
```

### LÃ©gende
- âœ… CrÃ©Ã© et configurÃ©
- âš ï¸ Ã€ implÃ©menter
- âŒ Manquant ou incorrect

---

## ğŸ—„ï¸ SchÃ©ma de Base de DonnÃ©es

### EntitÃ©s Principales (11 tables)

#### 1. USER - Utilisateurs
```sql
- id (PK, AUTO_INCREMENT)
- username (UNIQUE, VARCHAR(50))
- email (UNIQUE, VARCHAR(100))
- password_hash (VARCHAR(255))
- first_name (VARCHAR(50))
- last_name (VARCHAR(50))
- role (ENUM: 'junior', 'senior', 'lead', 'admin')
- avatar_url (VARCHAR(255), NULL)
- is_active (BOOLEAN, DEFAULT TRUE)
- date_joined (TIMESTAMP)
- last_login (TIMESTAMP, NULL)
- created_at, updated_at (TIMESTAMP)
```

#### 2. PROJECT - Projets
```sql
- id (PK)
- name (VARCHAR(100))
- description (TEXT, NULL)
- status (ENUM: 'actif', 'archive', 'suspendu')
- created_by (FK â†’ USER.id)
- created_at, updated_at (TIMESTAMP)
```

#### 3. PROJECT_MEMBER - Membres de projet (N:M)
```sql
- id (PK)
- project_id (FK â†’ PROJECT.id)
- user_id (FK â†’ USER.id)
- role_project (ENUM: 'member', 'contributor', 'maintainer')
- joined_at (TIMESTAMP)
- UNIQUE(project_id, user_id)
```

#### 4. NOTE - Notes techniques
```sql
- id (PK)
- title (VARCHAR(200))
- content (TEXT)
- excerpt (VARCHAR(500), NULL)
- status (ENUM: 'brouillon', 'publie', 'archive')
- priority (ENUM: 'basse', 'normale', 'haute')
- project_id (FK â†’ PROJECT.id)
- author_id (FK â†’ USER.id)
- view_count, like_count (INT, DEFAULT 0)
- created_at, updated_at, published_at (TIMESTAMP)
```

#### 5. TASK - TÃ¢ches
```sql
- id (PK)
- title (VARCHAR(200))
- description (TEXT, NULL)
- status (ENUM: 'a_faire', 'en_cours', 'en_test', 'terminee', 'annulee')
- priority (ENUM: 'basse', 'normale', 'haute', 'urgente')
- estimated_hours, actual_hours (DECIMAL(5,2), NULL)
- due_date, completed_date (DATE, NULL)
- project_id (FK â†’ PROJECT.id)
- assigned_to (FK â†’ USER.id, NULL)
- created_by (FK â†’ USER.id)
- created_at, updated_at (TIMESTAMP)
```

#### 6. TAG - Ã‰tiquettes
```sql
- id (PK)
- name (UNIQUE, VARCHAR(50))
- color (VARCHAR(7), DEFAULT '#6b7280')
- description (VARCHAR(200), NULL)
- usage_count (INT, DEFAULT 0)
- created_at (TIMESTAMP)
```

#### 7. NOTE_TAG - Classification notes (N:M)
```sql
- note_id (PK, FK â†’ NOTE.id)
- tag_id (PK, FK â†’ TAG.id)
- assigned_at (TIMESTAMP)
- PRIMARY KEY(note_id, tag_id)
```

#### 8. TASK_TAG - Classification tÃ¢ches (N:M)
```sql
- task_id (PK, FK â†’ TASK.id)
- tag_id (PK, FK â†’ TAG.id)
- assigned_at (TIMESTAMP)
- PRIMARY KEY(task_id, tag_id)
```

#### 9. COMMENT - Commentaires
```sql
- id (PK)
- content (TEXT)
- note_id (FK â†’ NOTE.id)
- author_id (FK â†’ USER.id)
- parent_comment_id (FK â†’ COMMENT.id, NULL)
- is_edited (BOOLEAN, DEFAULT FALSE)
- like_count (INT, DEFAULT 0)
- created_at, updated_at (TIMESTAMP)
```

#### 10. ATTACHMENT - Fichiers joints
```sql
- id (PK)
- original_name (VARCHAR(255))
- stored_name (VARCHAR(255))
- file_path (VARCHAR(500))
- file_size (INT)
- mime_type (VARCHAR(100))
- file_hash (VARCHAR(64), NULL)
- note_id (FK â†’ NOTE.id, NULL)
- comment_id (FK â†’ COMMENT.id, NULL)
- uploaded_by (FK â†’ USER.id)
- upload_date (TIMESTAMP)
```

#### 11. NOTIFICATION - Notifications
```sql
- id (PK)
- type (ENUM: 'note_created', 'note_updated', 'task_assigned', 
        'task_completed', 'comment_added', 'mention', 'project_invitation')
- title (VARCHAR(200))
- message (TEXT)
- user_id (FK â†’ USER.id)
- related_note_id (FK â†’ NOTE.id, NULL)
- related_task_id (FK â†’ TASK.id, NULL)
- related_comment_id (FK â†’ COMMENT.id, NULL)
- related_project_id (FK â†’ PROJECT.id, NULL)
- triggered_by (FK â†’ USER.id, NULL)
- is_read (BOOLEAN, DEFAULT FALSE)
- read_at, created_at, expires_at (TIMESTAMP)
```

### Relations et Contraintes

#### RÃ¨gles de Suppression (ON DELETE)
- **CASCADE** : UtilisÃ© pour les relations parent-enfant strictes
  - USER â†’ PROJECT, NOTE, TASK, COMMENT, ATTACHMENT
  - PROJECT â†’ NOTE, TASK, PROJECT_MEMBER
  - NOTE â†’ COMMENT, ATTACHMENT, NOTE_TAG
  - TASK â†’ TASK_TAG
  - TAG â†’ NOTE_TAG, TASK_TAG
  - COMMENT â†’ COMMENT (hiÃ©rarchie), ATTACHMENT

- **SET NULL** : UtilisÃ© pour rÃ©fÃ©rences optionnelles
  - USER â†’ TASK.assigned_to
  - NOTE/TASK/COMMENT/PROJECT â†’ NOTIFICATION
  - USER â†’ NOTIFICATION.triggered_by

#### Index de Performance
```sql
-- Sur USER
idx_user_role, idx_user_active

-- Sur PROJECT
idx_project_status, idx_project_created_by

-- Sur NOTE
idx_note_project, idx_note_status, idx_note_priority, idx_note_author

-- Sur TASK
idx_task_project, idx_task_status, idx_task_priority, 
idx_task_assigned, idx_task_due_date

-- Sur NOTIFICATION
idx_notification_user, idx_notification_type, idx_notification_read

-- Index composites
idx_note_project_status (project_id, status)
idx_task_project_assigned (project_id, assigned_to)
idx_notification_user_unread (user_id, is_read)
```

---

## ğŸ“ Conventions de Nommage

### Base de DonnÃ©es
- **Tables** : UPPERCASE avec underscore (ex: `USER`, `PROJECT_MEMBER`)
- **Colonnes** : snake_case (ex: `created_at`, `password_hash`)
- **ClÃ©s Ã©trangÃ¨res** : `{table}_id` (ex: `project_id`, `author_id`)
- **Index** : `idx_{table}_{column}` (ex: `idx_user_role`)
- **Contraintes** : `fk_{table}_{column}` (ex: `fk_note_project`)

### Django (Backend)
- **Models** : PascalCase, singular (ex: `User`, `Project`)
- **Fields** : snake_case (ex: `created_at`, `password_hash`)
- **Views** : snake_case + ViewSet suffix (ex: `ProjectViewSet`)
- **Serializers** : PascalCase + Serializer suffix (ex: `UserSerializer`)
- **URLs** : kebab-case (ex: `/api/projects/`, `/api/user-profile/`)
- **Apps** : snake_case, plural (ex: `accounts`, `notifications`)

### React (Frontend)
- **Components** : PascalCase (ex: `LoginPage`, `ProjectCard`)
- **Functions** : camelCase (ex: `handleSubmit`, `fetchProjects`)
- **Contexts** : PascalCase + Context suffix (ex: `AuthContext`)
- **Services** : camelCase + Service suffix (ex: `authService`)
- **Constants** : UPPER_SNAKE_CASE (ex: `API_BASE_URL`, `USER_ROLES`)
- **CSS Classes** : kebab-case (ex: `.project-card`, `.btn-primary`)

### API REST
- **Endpoints** : kebab-case, plural (ex: `/api/projects/`, `/api/task-tags/`)
- **Methods** :
  - GET `/api/projects/` - Liste
  - POST `/api/projects/` - CrÃ©ation
  - GET `/api/projects/{id}/` - DÃ©tail
  - PUT `/api/projects/{id}/` - Modification complÃ¨te
  - PATCH `/api/projects/{id}/` - Modification partielle
  - DELETE `/api/projects/{id}/` - Suppression

### Git
- **Branches** : 
  - `main` - Production
  - `develop` - DÃ©veloppement
  - `feature/{nom-feature}` - Nouvelle fonctionnalitÃ©
  - `fix/{nom-bug}` - Correction de bug
- **Commits** : Conventional Commits
  - `feat: add user authentication`
  - `fix: resolve login redirect issue`
  - `docs: update API documentation`
  - `refactor: improve project service`

---

## ğŸ” SystÃ¨me de Permissions

### HiÃ©rarchie des RÃ´les
1. **Junior** : Lecture, crÃ©ation de notes, commentaires
2. **Senior** : Junior + modification de notes
3. **Lead** : Senior + gestion projets, assignation tÃ¢ches
4. **Admin** : Lead + administration globale

### RÃ¨gles MÃ©tier
- Seuls les membres d'un projet peuvent voir ses notes/tÃ¢ches
- Lead+ peuvent crÃ©er/supprimer des projets
- Utilisateurs modifient leurs propres notes (sauf Senior+)
- TÃ¢ches assignÃ©es uniquement aux membres du projet
- Fichiers limitÃ©s Ã  100MB
- Maximum 10 tags par note/tÃ¢che
- Notifications expirent aprÃ¨s 30 jours

---

## ğŸ“¡ API REST - Endpoints Principaux

### Authentification
- `POST /api/auth/login/` - Connexion
- `POST /api/auth/logout/` - DÃ©connexion
- `GET /api/auth/user/` - Profil utilisateur

### Projets
- `GET /api/projects/` - Liste projets
- `POST /api/projects/` - CrÃ©er projet
- `GET /api/projects/{id}/` - DÃ©tail projet
- `PUT /api/projects/{id}/` - Modifier projet
- `DELETE /api/projects/{id}/` - Supprimer projet
- `POST /api/projects/{id}/members/` - Ajouter membre
- `DELETE /api/projects/{id}/members/{user_id}/` - Retirer membre

### Notes
- `GET /api/projects/{id}/notes/` - Notes d'un projet
- `POST /api/projects/{id}/notes/` - CrÃ©er note
- `GET /api/notes/{id}/` - DÃ©tail note
- `PUT /api/notes/{id}/` - Modifier note
- `DELETE /api/notes/{id}/` - Supprimer note

### TÃ¢ches
- `GET /api/projects/{id}/tasks/` - TÃ¢ches d'un projet
- `POST /api/projects/{id}/tasks/` - CrÃ©er tÃ¢che
- `GET /api/tasks/{id}/` - DÃ©tail tÃ¢che
- `PUT /api/tasks/{id}/` - Modifier tÃ¢che
- `DELETE /api/tasks/{id}/` - Supprimer tÃ¢che

### Transversal
- `GET /api/notes/{id}/comments/` - Commentaires
- `POST /api/notes/{id}/comments/` - Ajouter commentaire
- `GET /api/tags/` - Tags disponibles
- `GET /api/notifications/` - Notifications utilisateur

---

## ğŸ”„ Flux de DonnÃ©es

### Authentification
```
User Login â†’ Django Auth â†’ Session Cookie â†’ Frontend State (AuthContext)
```

### CrÃ©ation de Note
```
React Form â†’ noteService.createNote() â†’ POST /api/notes/ 
â†’ Django Serializer â†’ Model.save() â†’ MariaDB 
â†’ Response â†’ Update ProjectContext â†’ Re-render
```

### Notifications
```
Action (task assigned) â†’ Django Signal â†’ Notification.create() 
â†’ WebSocket (future) â†’ Frontend NotificationContext â†’ Toast/Badge
```

---

Ce document architecture est conÃ§u pour Ãªtre une rÃ©fÃ©rence unique et complÃ¨te du projet ShareTech.